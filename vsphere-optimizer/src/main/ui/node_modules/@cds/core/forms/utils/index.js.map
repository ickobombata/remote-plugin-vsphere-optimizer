{"version":3,"file":"index.js","sources":["../../../../src/forms/utils/index.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2022 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { html } from 'lit';\nimport { createId, pxToRem } from '@cds/core/internal';\nexport const formLayouts = ['vertical', 'vertical-inline', 'horizontal', 'horizontal-inline', 'compact'];\nexport const defaultFormLayout = 'horizontal';\nexport const defaultControlWidth = 'stretch';\nexport function associateInputAndLabel(input, label) {\n    if (input && label) {\n        assignInputId(input);\n        label.setAttribute('for', input.id);\n    }\n}\nexport function associateInputToDatalist(input, datalist) {\n    if (datalist) {\n        assignInputId(input);\n        datalist.id = `${input.id}-datalist`;\n        input.setAttribute('list', datalist.id);\n    }\n}\nexport function assignInputId(input) {\n    if (!input.id.length) {\n        input.id = createId();\n    }\n}\nexport const layoutGroupToControlMapper = {\n    'horizontal-inline': 'horizontal',\n    'vertical-inline': 'vertical',\n    horizontal: 'horizontal',\n    vertical: 'vertical',\n    compact: 'compact',\n};\nexport function getStatusIcon(status) {\n    return html `${status !== 'neutral'\n        ? html ` <cds-control-action readonly class=\"status\" cds-layout=\"align:shrink\">\n        <cds-icon\n          status=\"${status === 'error' ? 'danger' : 'success'}\"\n          shape=\"${status === 'error' ? 'exclamation-circle' : 'check-circle'}\"\n          size=\"16\"\n          inner-offset=${4}\n        ></cds-icon>\n      </cds-control-action>`\n        : ''} `;\n}\nexport async function getLargestPrimaryLabelWidth(controls) {\n    return Promise.all(controls.map(c => c.updateComplete)).then(() => {\n        const primaryLabels = controls.filter(c => { var _a; return ((_a = c.controlLabel) === null || _a === void 0 ? void 0 : _a.action) === 'primary'; });\n        return pxToRem(Math.max(...primaryLabels.map(c => c.controlLabel.getBoundingClientRect().width)));\n    });\n}\nexport function controlIsWrapped(input, label, layout) {\n    return (layout !== 'vertical' &&\n        layout !== 'vertical-inline' &&\n        input.getBoundingClientRect().top > (label === null || label === void 0 ? void 0 : label.getBoundingClientRect().top) + 12 // 12px buffer for rounding and inputs that are thin like the range input\n    );\n}\nexport function inlineControlListIsWrapped(inlineControls, layout) {\n    const first = inlineControls[0];\n    const last = inlineControls[inlineControls.length - 1];\n    const isInlineLayout = layout === 'vertical-inline' || layout === 'horizontal-inline';\n    return isInlineLayout && last.getBoundingClientRect().top > first.getBoundingClientRect().top;\n}\nexport function isVerticalLayout(layout) {\n    return layout === 'vertical' || layout === 'vertical-inline';\n}\n/**\n * Returns updated message status unless hidden then returns 'neutral'\n */\nexport async function getCurrentMessageStatus(messages) {\n    const message = messages.find(m => m.status !== 'neutral');\n    await (message === null || message === void 0 ? void 0 : message.updateComplete);\n    return message && !message.hidden ? message.status : 'neutral';\n}\n"],"names":["formLayouts","defaultFormLayout","defaultControlWidth","associateInputAndLabel","input","label","assignInputId","setAttribute","id","associateInputToDatalist","datalist","length","createId","layoutGroupToControlMapper","horizontal","vertical","compact","getStatusIcon","status","html","async","getLargestPrimaryLabelWidth","controls","Promise","all","map","c","updateComplete","then","primaryLabels","filter","_a","controlLabel","action","pxToRem","Math","max","getBoundingClientRect","width","controlIsWrapped","layout","top","inlineControlListIsWrapped","inlineControls","first","last","isVerticalLayout","getCurrentMessageStatus","messages","message","find","m","hidden"],"mappings":"sFAOY,MAACA,EAAc,CAAC,WAAY,kBAAmB,aAAc,oBAAqB,WACjFC,EAAoB,aACpBC,EAAsB,UAC5B,SAASC,EAAuBC,EAAOC,GACtCD,GAASC,IACTC,EAAcF,GACdC,EAAME,aAAa,MAAOH,EAAMI,KAGjC,SAASC,EAAyBL,EAAOM,GACxCA,IACAJ,EAAcF,GACdM,EAASF,GAAQJ,EAAMI,GAAT,YACdJ,EAAMG,aAAa,OAAQG,EAASF,KAGrC,SAASF,EAAcF,GACrBA,EAAMI,GAAGG,SACVP,EAAMI,GAAKI,KAGP,MAACC,EAA6B,CACtC,oBAAqB,aACrB,kBAAmB,WACnBC,WAAY,aACZC,SAAU,WACVC,QAAS,WAEN,SAASC,EAAcC,GAC1B,OAAOC,CAAK,GAAc,YAAXD,EACTC,CAAK,sGAEgB,UAAXD,EAAqB,SAAW,qBACtB,UAAXA,EAAqB,qBAAuB,2CAEtC,sCAGf,KAEHE,eAAeC,EAA4BC,GAC9C,OAAOC,QAAQC,IAAIF,EAASG,KAAIC,GAAKA,EAAEC,kBAAiBC,MAAK,KACzD,MAAMC,EAAgBP,EAASQ,QAAOJ,IAAO,IAAIK,EAAI,MAAkF,aAAhD,QAAzBA,EAAKL,EAAEM,oBAAiC,IAAPD,OAAgB,EAASA,EAAGE,WAC3H,OAAOC,EAAQC,KAAKC,OAAOP,EAAcJ,KAAIC,GAAKA,EAAEM,aAAaK,wBAAwBC,aAG1F,SAASC,EAAiBnC,EAAOC,EAAOmC,GAC3C,MAAmB,aAAXA,GACO,oBAAXA,GACApC,EAAMiC,wBAAwBI,KAAOpC,MAAAA,OAAqC,EAASA,EAAMgC,wBAAwBI,KAAO,GAGzH,SAASC,EAA2BC,EAAgBH,GACvD,MAAMI,EAAQD,EAAe,GACvBE,EAAOF,EAAeA,EAAehC,OAAS,GAEpD,OADkC,oBAAX6B,GAA2C,sBAAXA,IAC9BK,EAAKR,wBAAwBI,IAAMG,EAAMP,wBAAwBI,IAEvF,SAASK,EAAiBN,GAC7B,MAAkB,aAAXA,GAAoC,oBAAXA,EAK7BpB,eAAe2B,EAAwBC,GAC1C,MAAMC,EAAUD,EAASE,MAAKC,GAAkB,YAAbA,EAAEjC,SAErC,aADO+B,MAAAA,OAAyC,EAASA,EAAQtB,gBAC1DsB,IAAYA,EAAQG,OAASH,EAAQ/B,OAAS"}