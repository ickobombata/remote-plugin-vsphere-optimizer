import{__decorate as t}from"tslib";import{LitElement as o,html as s}from"lit";import{query as e}from"lit/decorators/query.js";import{setAttributes as i,syncProps as r,syncDefinedProps as a,describeElementByElements as l,updateComponentLayout as n,baseStyles as c,property as d,querySlot as p,querySlotAll as u,id as h,event as y}from"@cds/core/internal";import g from"./control-group.element.scss.js";import{defaultFormLayout as m,defaultControlWidth as v,getStatusIcon as b,inlineControlListIsWrapped as f,controlIsWrapped as C,getCurrentMessageStatus as L,formLayouts as $}from"../utils/index.js";class A extends o{constructor(){super(...arguments);this.status="neutral",this.layout=m,this.controlAlign="left",this.disabled=!1,this.controlWidth=v,this.responsive=!0,this.isInlineControlGroup=!1,this.isControlGroup=!0,this.observers=[]}get messagesTemplate(){return s`<div ?hidden="${0===this.messages.length}" cds-layout="horizontal align:shrink gap:sm wrap:none" class="messages-container">${this.isInlineControlGroup?"":b(this.status)}<div class="messages"><slot name="message" @slotchange="${this.updateControlMessages}"></slot></div></div>`}get controlsTemplate(){return this.isInlineControlGroup?s`<div cds-layout="horizontal gap:sm align:horizontal-stretch" class="input-container"><div class="controls" cds-layout="horizontal align:horizontal-stretch wrap:none"><slot name="controls"></slot></div>${b(this.status)}</div>`:s`<div cds-layout="horizontal align:shrink" class="input-container"><div class="controls" cds-layout="${this.inlineControlLayout}"><slot name="controls"></slot></div></div>`}get inlineControlLayout(){return`${this.layout.includes("inline")||"compact"===this.layout?"horizontal gap:md":"vertical gap:sm"} ${this.layout.includes("vertical")?"":"wrap:none"}`}get primaryLabelLayout(){return this.layout.includes("vertical")?"vertical gap:sm":"horizontal gap:lg"}get controlMessageLayout(){return("compact"===this.layout?"horizontal":"vertical")+" gap:sm wrap:none align:stretch"}render(){return s`<div class="private-host" cds-layout="${this.primaryLabelLayout}"><cds-internal-control-label .disabled="${this.disabled}" cds-layout="align:top" action="primary"><slot name="label"></slot></cds-internal-control-label><div class="control-message-container" cds-layout="${this.controlMessageLayout}">${this.controlsTemplate} ${this.messagesTemplate}</div></div>`}connectedCallback(){super.connectedCallback(),i(this,["role","group"],["cds-control-group",""])}firstUpdated(t){super.firstUpdated(t),this.associateLabelAndGroup(),this.setupResponsive()}updated(t){super.updated(t),t.set("isControlGroup",!0),this.controls.forEach((t=>t.isControlGroup=!0)),this.messages.forEach((o=>r(o,this,{disabled:t.has("disabled")}))),a(t,this,Array.from(this.controls))}disconnectedCallback(){super.disconnectedCallback(),this.observers.forEach((t=>t.disconnect()))}get layoutStable(){return!f(Array.from(this.controls),this.layout)&&!C(this.controlSlot,this.controlLabel,this.layout)}associateLabelAndGroup(){this.setAttribute("aria-labelledby",this.groupLabelId),this.label.setAttribute("id",this.groupLabelId)}async updateControlMessages(){l(this,Array.from(this.messages)),this.status=await L(Array.from(this.messages))}setupResponsive(){if(this.responsive){const t={layouts:$,initialLayout:this.layout};this.observers.push(n(this,t,(()=>this.layoutChange.emit(this.layout,{bubbles:!0}))))}}}A.styles=[c,g],t([d({type:String})],A.prototype,"status",void 0),t([d({type:String})],A.prototype,"layout",void 0),t([d({type:String})],A.prototype,"controlAlign",void 0),t([d({type:Boolean})],A.prototype,"disabled",void 0),t([d({type:String})],A.prototype,"controlWidth",void 0),t([d({type:Boolean})],A.prototype,"responsive",void 0),t([p("label",{assign:"label",required:"warning",requiredMessage:"To meet a11y standards a <label> should be provided"})],A.prototype,"label",void 0),t([u("cds-control, [cds-control]")],A.prototype,"controls",void 0),t([u("cds-control-message")],A.prototype,"messages",void 0),t([e("cds-internal-control-label[action=primary]",!0)],A.prototype,"controlLabel",void 0),t([e(".controls",!0)],A.prototype,"controlSlot",void 0),t([h()],A.prototype,"groupLabelId",void 0),t([y()],A.prototype,"layoutChange",void 0);export{A as CdsInternalControlGroup};
//# sourceMappingURL=control-group.element.js.map
