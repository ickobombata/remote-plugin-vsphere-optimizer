{"version":3,"file":"framework.js","sources":["../../../../src/internal/utils/framework.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2022 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\n// DO NOT USE for conditionally applying behavior based on the host framework.\n// These utilities are only for detecting host frameworks for debugging and logging.\n// Host framework specific code should exist outside of the @cds/core package.\n// Get values once then cache\nlet angularVersion;\nlet angularJSVersion;\nlet reactVersion;\nlet vueVersion;\nexport function getAngularVersion(useCache = true) {\n    if (!useCache || !angularVersion) {\n        const appRoot = document && document.querySelector('[ng-version]');\n        angularVersion = appRoot ? `${appRoot.getAttribute('ng-version')}` : undefined;\n    }\n    return angularVersion;\n}\nexport function getAngularJSVersion(useCache = true) {\n    var _a, _b, _c;\n    if (!useCache || !angularVersion) {\n        angularJSVersion = (_c = (_b = (_a = window) === null || _a === void 0 ? void 0 : _a.angular) === null || _b === void 0 ? void 0 : _b.version) === null || _c === void 0 ? void 0 : _c.full;\n    }\n    return angularJSVersion;\n}\nexport function getReactVersion(useCache = true) {\n    var _a, _b, _c;\n    if (!useCache || !reactVersion) {\n        if ((_c = (_b = (_a = window) === null || _a === void 0 ? void 0 : _a.CDS) === null || _b === void 0 ? void 0 : _b._react) === null || _c === void 0 ? void 0 : _c.version) {\n            reactVersion = window.CDS._react.version;\n        }\n        else if (document.querySelector('[data-reactroot], [data-reactid]')) {\n            reactVersion = 'unknown version';\n        }\n        else {\n            reactVersion = undefined;\n        }\n    }\n    return reactVersion;\n}\nexport function getVueVersion(useCache = true) {\n    if (!useCache || !vueVersion) {\n        const all = document.querySelectorAll('*');\n        let el;\n        for (let i = 0; i < all.length; i++) {\n            if (all[i].__vue__) {\n                el = all[i];\n                break;\n            }\n        }\n        vueVersion = el ? 'unknown version' : undefined;\n    }\n    return vueVersion;\n}\nexport function isStorybook() {\n    var _a, _b;\n    return (_b = (_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) === null || _b === void 0 ? void 0 : _b.includes('localhost:6006');\n}\n"],"names":["angularVersion","angularJSVersion","reactVersion","vueVersion","getAngularVersion","useCache","appRoot","document","querySelector","getAttribute","undefined","getAngularJSVersion","_a","_b","_c","window","angular","version","full","getReactVersion","CDS","_react","getVueVersion","all","querySelectorAll","el","i","length","__vue__","isStorybook","location","href","includes"],"mappings":"AASA,IAAIA,EACAC,EACAC,EACAC,EACG,SAASC,EAAkBC,GAAW,GACzC,IAAKA,IAAaL,EAAgB,CAC9B,MAAMM,EAAUC,UAAYA,SAASC,cAAc,gBACnDR,EAAiBM,EAAU,GAAGA,EAAQG,aAAa,mBAAkBC,EAEzE,OAAOV,EAEJ,SAASW,EAAoBN,GAAW,GAC3C,IAAIO,EAAIC,EAAIC,EAIZ,OAHKT,GAAaL,IACdC,EAAmJ,QAA/Ha,EAA8E,QAAxED,EAAuB,QAAjBD,EAAKG,cAA2B,IAAPH,OAAgB,EAASA,EAAGI,eAA4B,IAAPH,OAAgB,EAASA,EAAGI,eAA4B,IAAPH,OAAgB,EAASA,EAAGI,MAEpLjB,EAEJ,SAASkB,EAAgBd,GAAW,GACvC,IAAIO,EAAIC,EAAIC,EAYZ,OAXKT,GAAaH,IAEVA,GAD2H,QAA1HY,EAA0E,QAApED,EAAuB,QAAjBD,EAAKG,cAA2B,IAAPH,OAAgB,EAASA,EAAGQ,WAAwB,IAAPP,OAAgB,EAASA,EAAGQ,cAA2B,IAAPP,OAAgB,EAASA,EAAGG,SAChJF,OAAOK,IAAIC,OAAOJ,QAE5BV,SAASC,cAAc,oCACb,uBAGAE,GAGhBR,EAEJ,SAASoB,EAAcjB,GAAW,GACrC,IAAKA,IAAaF,EAAY,CAC1B,MAAMoB,EAAMhB,SAASiB,iBAAiB,KACtC,IAAIC,EACJ,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAII,OAAQD,IAC5B,GAAIH,EAAIG,GAAGE,QAAS,CAChBH,EAAKF,EAAIG,GACT,MAGRvB,EAAasB,EAAK,uBAAoBf,EAE1C,OAAOP,EAEJ,SAAS0B,IACZ,IAAIjB,EAAIC,EACR,OAAsI,QAA9HA,EAAgF,QAA1ED,EAAgB,OAAXG,aAA8B,IAAXA,YAAoB,EAASA,OAAOe,gBAA6B,IAAPlB,OAAgB,EAASA,EAAGmB,YAAyB,IAAPlB,OAAgB,EAASA,EAAGmB,SAAS"}