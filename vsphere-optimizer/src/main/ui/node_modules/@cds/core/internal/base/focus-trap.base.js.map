{"version":3,"file":"focus-trap.base.js","sources":["../../../../src/internal/base/focus-trap.base.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2022 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { __decorate } from \"tslib\";\nimport { html, LitElement } from 'lit';\nimport { FocusTrap } from '../utils/focus-trap.js';\nimport { state, property } from '../decorators/property.js';\nimport { createId } from '../utils/identity.js';\nexport class CdsBaseFocusTrap extends LitElement {\n    constructor() {\n        super();\n        /**\n         * Its recommended to remove or add a focus trap element from the DOM\n         * some SSR systems can have technical constraints where the item can\n         * only be removed via CSS/hidden.\n         */\n        this.hidden = false;\n        this.demoMode = false;\n        this.focusTrapId = createId();\n        // if we see issues instantiating here, we should consider moving to\n        // firstUpdated()\n        this.focusTrap = new FocusTrap(this);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.toggleFocusTrap();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.focusTrap.removeFocusTrap();\n    }\n    attributeChangedCallback(name, old, value) {\n        super.attributeChangedCallback(name, old, value);\n        if (name === 'hidden' && old !== value) {\n            this.toggleFocusTrap();\n        }\n    }\n    render() {\n        return html `<slot></slot>`;\n    }\n    toggleFocusTrap() {\n        if (!this.demoMode && !this.hasAttribute('hidden')) {\n            this.focusTrap.enableFocusTrap();\n        }\n        else {\n            this.focusTrap.removeFocusTrap();\n        }\n    }\n}\n__decorate([\n    property({ type: Boolean })\n], CdsBaseFocusTrap.prototype, \"hidden\", void 0);\n__decorate([\n    state({ type: Boolean, reflect: true })\n], CdsBaseFocusTrap.prototype, \"demoMode\", void 0);\n__decorate([\n    property({ type: String })\n], CdsBaseFocusTrap.prototype, \"focusTrapId\", void 0);\n"],"names":["CdsBaseFocusTrap","LitElement","constructor","super","this","hidden","demoMode","focusTrapId","createId","focusTrap","FocusTrap","connectedCallback","toggleFocusTrap","disconnectedCallback","removeFocusTrap","attributeChangedCallback","name","old","value","render","html","hasAttribute","enableFocusTrap","__decorate","property","type","Boolean","prototype","state","reflect","String"],"mappings":"iPAUO,MAAMA,UAAyBC,EAClCC,cACIC,QAMAC,KAAKC,QAAS,EACdD,KAAKE,UAAW,EAChBF,KAAKG,YAAcC,IAGnBJ,KAAKK,UAAY,IAAIC,EAAUN,MAEnCO,oBACIR,MAAMQ,oBACNP,KAAKQ,kBAETC,uBACIV,MAAMU,uBACNT,KAAKK,UAAUK,kBAEnBC,yBAAyBC,EAAMC,EAAKC,GAChCf,MAAMY,yBAAyBC,EAAMC,EAAKC,GAC7B,WAATF,GAAqBC,IAAQC,GAC7Bd,KAAKQ,kBAGbO,SACI,OAAOC,CAAK,gBAEhBR,kBACSR,KAAKE,UAAaF,KAAKiB,aAAa,UAIrCjB,KAAKK,UAAUK,kBAHfV,KAAKK,UAAUa,mBAO3BC,EAAW,CACPC,EAAS,CAAEC,KAAMC,WAClB1B,EAAiB2B,UAAW,cAAU,GACzCJ,EAAW,CACPK,EAAM,CAAEH,KAAMC,QAASG,SAAS,KACjC7B,EAAiB2B,UAAW,gBAAY,GAC3CJ,EAAW,CACPC,EAAS,CAAEC,KAAMK,UAClB9B,EAAiB2B,UAAW,mBAAe"}