{"version":3,"file":"focus-trap-tracker.service.js","sources":["../../../../src/internal/services/focus-trap-tracker.service.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2022 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { arrayTail } from '../utils/array.js';\nimport { GlobalStateService } from './global.service.js';\nexport const CDS_FOCUS_TRAP_DOCUMENT_ATTR = 'cds-focus-trap';\n/**\n * FocusTrapTrackerService is a static class that keeps track of the active element with focus trap,\n * in case there are multiple in a given page.\n */\nexport class FocusTrapTrackerService {\n    static getTrapElements() {\n        return [...GlobalStateService.state.focusTrapItems];\n    }\n    static setTrapElements(elements) {\n        const htmlEl = document.querySelector('html');\n        elements.length\n            ? htmlEl === null || htmlEl === void 0 ? void 0 : htmlEl.setAttribute(CDS_FOCUS_TRAP_DOCUMENT_ATTR, '')\n            : htmlEl === null || htmlEl === void 0 ? void 0 : htmlEl.removeAttribute(CDS_FOCUS_TRAP_DOCUMENT_ATTR);\n        GlobalStateService.state.focusTrapItems = [...elements];\n    }\n    static setCurrent(element) {\n        if (!(element === null || element === void 0 ? void 0 : element.focusTrapId)) {\n            return;\n        }\n        this.setTrapElements([...this.getTrapElements().filter(e => e.focusTrapId !== element.focusTrapId), element]);\n    }\n    static activatePreviousCurrent() {\n        this.setTrapElements([...this.getTrapElements()].slice(0, -1));\n    }\n    static getCurrent() {\n        return arrayTail(this.getTrapElements()) || null;\n    }\n}\n"],"names":["CDS_FOCUS_TRAP_DOCUMENT_ATTR","FocusTrapTrackerService","static","GlobalStateService","state","focusTrapItems","elements","htmlEl","document","querySelector","length","setAttribute","removeAttribute","element","focusTrapId","this","setTrapElements","getTrapElements","filter","e","slice","arrayTail"],"mappings":"uGAOY,MAACA,EAA+B,iBAKrC,MAAMC,EACTC,yBACI,MAAO,IAAIC,EAAmBC,MAAMC,gBAExCH,uBAAuBI,GACnB,MAAMC,EAASC,SAASC,cAAc,QACtCH,EAASI,OACHH,MAAAA,GAAgDA,EAAOI,aAZzB,iBAYoE,IAClGJ,MAAAA,GAAgDA,EAAOK,gBAbzB,kBAcpCT,EAAmBC,MAAMC,eAAiB,IAAIC,GAElDJ,kBAAkBW,IACRA,MAAAA,OAAyC,EAASA,EAAQC,cAGhEC,KAAKC,gBAAgB,IAAID,KAAKE,kBAAkBC,QAAOC,GAAKA,EAAEL,cAAgBD,EAAQC,cAAcD,IAExGX,iCACIa,KAAKC,gBAAgB,IAAID,KAAKE,mBAAmBG,MAAM,GAAI,IAE/DlB,oBACI,OAAOmB,EAAUN,KAAKE,oBAAsB"}